package org.apache.jsp.pages;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class pay2_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final JspFactory _jspxFactory = JspFactory.getDefaultFactory();

  private static java.util.List<String> _jspx_dependants;

  private org.glassfish.jsp.api.ResourceInjector _jspx_resourceInjector;

  public java.util.List<String> getDependants() {
    return _jspx_dependants;
  }

  public void _jspService(HttpServletRequest request, HttpServletResponse response)
        throws java.io.IOException, ServletException {

    PageContext pageContext = null;
    HttpSession session = null;
    ServletContext application = null;
    ServletConfig config = null;
    JspWriter out = null;
    Object page = this;
    JspWriter _jspx_out = null;
    PageContext _jspx_page_context = null;

    try {
      response.setContentType("text/html;charset=utf-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;
      _jspx_resourceInjector = (org.glassfish.jsp.api.ResourceInjector) application.getAttribute("com.sun.appserv.jsp.resource.injector");

      out.write("<!doctype html>\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("\r\n");
      out.write("<title>支付宝支付</title>\r\n");
      out.write("<meta charset=\"utf-8\">\r\n");
      out.write("<meta name=\"viewport\"\r\n");
      out.write("\tcontent=\"width=device-width, initial-scale=1, maximum-scale=1\">\r\n");
      out.write("<link rel=\"stylesheet\" href=\"jqm/jquery.mobile-1.3.2.min.css\">\r\n");
      out.write("<script src=\"jqm/jquery.js\"></script>\r\n");
      out.write("<script src=\"jqm/jquery.mobile-1.3.2.min.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("\tfunction showQuery(no) {\r\n");
      out.write("\t\tif (no == \"01\")//验证码正确，询问余额宝\r\n");
      out.write("\t\t{\r\n");
      out.write("\t\t\t$(\"#yuebao\").attr(\"style\", \"display:inline\");\r\n");
      out.write("\t\t\thideValidate();\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tif (no == \"001\")//验证码正确，询问手机支付\r\n");
      out.write("\t\t{\r\n");
      out.write("\t\t\t$(\"#zhengshu\").attr(\"style\", \"display:inline\");\r\n");
      out.write("\t\t\thideValidate();\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tif (no == \"011\")//验证码正确，两个都需要询问\r\n");
      out.write("\t\t{\r\n");
      out.write("\t\t\t$(\"#yuebao\").attr(\"style\", \"display:inline\");//若两个都要先问余额宝，通过了再显示问手机支付\r\n");
      out.write("\t\t\t$(\"#yuebao\").attr(\"type\", \"1\");//type为1表示两个都要询问\r\n");
      out.write("\t\t\thideValidate();\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tif (no == \"1\")//验证码错误\r\n");
      out.write("\t\t{\r\n");
      out.write("\t\t\t$(\"#errorBox1\").text(\"验证码错误，请重新输入！\");\r\n");
      out.write("\t\t\t$(\"#errorBox1\").show();\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tif (no == \"6\")\r\n");
      out.write("\t\t\t$(\".error\").text(\"\");\r\n");
      out.write("\t\tif (no == \"9\") {\r\n");
      out.write("\t\t\tlocation.href = \"SystemPrompt?type=9\";\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tif (no == \"-1\") {\r\n");
      out.write("\t\t\tlocation.href = \"SystemPrompt?type=-1\";\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tif (no == \"3\") {\r\n");
      out.write("\t\t\t$(\"#zhengshu\").attr(\"style\", \"display:inline\");\r\n");
      out.write("\t\t\thideValidate();\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\t// 使用app支付\r\n");
      out.write("\t\tif (no == \"10\") {\r\n");
      out.write("\t\t\tlocation.href = \"AskApp\";\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tif (no == \"08\") {\r\n");
      out.write("\t\t\tlocation.href = \"SystemPrompt?type=08\";\r\n");
      out.write("\t\t}\r\n");
      out.write("\r\n");
      out.write("\t}\r\n");
      out.write("\r\n");
      out.write("\tfunction hideValidate()//隐藏验证码控件\r\n");
      out.write("\t{\r\n");
      out.write("\t\t$(\"#validateSet\").attr(\"style\", \"display:none\");\r\n");
      out.write("\t}\r\n");
      out.write("\r\n");
      out.write("\tfunction checkPay2(obj) {\r\n");
      out.write("\t\tvar validate = $(\"#validate\").val();\r\n");
      out.write("\t\tvar temp = $(obj).attr(\"onclick\");\r\n");
      out.write("\t\tif (!(/\\w{4}/.test(validate))) {\r\n");
      out.write("\t\t\t$(\"#errorBox1\").text(\"验证码必须为四位字符！\");\r\n");
      out.write("\t\t\t$(\"#errorBox1\").show();\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\tvar myData = \"validate=\" + validate;\r\n");
      out.write("\t\t\t$.ajax({\r\n");
      out.write("\t\t\t\tbeforeSend : function() {\r\n");
      out.write("\t\t\t\t\t$.mobile.loading('show', {\r\n");
      out.write("\t\t\t\t\t\ttext : '正在验证',\r\n");
      out.write("\t\t\t\t\t\ttextVisible : true,\r\n");
      out.write("\t\t\t\t\t\ttheme : 'b',\r\n");
      out.write("\t\t\t\t\t\thtml : \"\"\r\n");
      out.write("\t\t\t\t\t});\r\n");
      out.write("\t\t\t\t\t$(obj).attr(\"onclick\", \"\");//设置链接无效\r\n");
      out.write("\t\t\t\t}, //Show spinner\r\n");
      out.write("\r\n");
      out.write("\t\t\t\tcomplete : function() {\r\n");
      out.write("\t\t\t\t\t$.mobile.loading('hide');\r\n");
      out.write("\t\t\t\t\t$(obj).attr(\"onclick\", temp);//设置链接有效\r\n");
      out.write("\t\t\t\t}, //Hide spinner\r\n");
      out.write("\t\t\t\ttype : \"post\",\r\n");
      out.write("\t\t\t\turl : \"checkPay2\",\r\n");
      out.write("\t\t\t\tdata : myData,\r\n");
      out.write("\t\t\t\tdataType : \"text\",\r\n");
      out.write("\t\t\t\tsuccess : function(msg) {\r\n");
      out.write("\t\t\t\t\tvar jsonObj = eval(msg);\r\n");
      out.write("\t\t\t\t\tvar type = jsonObj.type;\r\n");
      out.write("\t\t\t\t\tvar imgString = jsonObj.imgString;\r\n");
      out.write("\t\t\t\t\t//alert(type);\r\n");
      out.write("\t\t\t\t\tif (type == 0) {\r\n");
      out.write("\t\t\t\t\t\t$(\"#acContent\").hide();\r\n");
      out.write("\t\t\t\t\t\t$(\"#reLoginContent\").show();\r\n");
      out.write("\t\t\t\t\t\tlocation.href = \"successPay2\";\r\n");
      out.write("\t\t\t\t\t} else {\r\n");
      out.write("\t\t\t\t\t\tshowQuery(6);\r\n");
      out.write("\t\t\t\t\t\tshowQuery(type);\r\n");
      out.write("\t\t\t\t\t\tif (type == 1)//可以不要，出错验证码。不会被更换\r\n");
      out.write("\t\t\t\t\t\t{\r\n");
      out.write("\t\t\t\t\t\t\t$(\"#validateImg\").attr(\"src\", imgString);\r\n");
      out.write("\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t},\r\n");
      out.write("\t\t\t\terror : function(error) {\r\n");
      out.write("\t\t\t\t\talert(\"ac error\");\r\n");
      out.write("\t\t\t\t\tconsole.log(error);\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t});\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\r\n");
      out.write("\tfunction refreAC() {\r\n");
      out.write("\t\t$(\"#ensureBtn\").disabled = true; // 不能点击\r\n");
      out.write("\t\t$.ajax({\r\n");
      out.write("\t\t\tbeforeSend : function() {\r\n");
      out.write("\t\t\t\t$.mobile.loading('show', {\r\n");
      out.write("\t\t\t\t\ttext : '正在刷新',\r\n");
      out.write("\t\t\t\t\ttextVisible : true,\r\n");
      out.write("\t\t\t\t\ttheme : 'b',\r\n");
      out.write("\t\t\t\t\thtml : \"\"\r\n");
      out.write("\t\t\t\t});\r\n");
      out.write("\t\t\t}, //Show spinner\r\n");
      out.write("\r\n");
      out.write("\t\t\tcomplete : function() {\r\n");
      out.write("\t\t\t\t$.mobile.loading('hide');\r\n");
      out.write("\t\t\t\t$(\"#ensureBtn\").disabled = false;\r\n");
      out.write("\t\t\t}, //Hide spinner\r\n");
      out.write("\t\t\ttype : \"post\",\r\n");
      out.write("\t\t\turl : \"refreAC\",\r\n");
      out.write("\t\t\tdataType : \"text\",\r\n");
      out.write("\t\t\tsuccess : function(msg) {\r\n");
      out.write("\t\t\t\tvar jsonObj = eval(msg);\r\n");
      out.write("\t\t\t\tvar type = jsonObj.type;\r\n");
      out.write("\t\t\t\tvar imgString = jsonObj.imgString;//这里指接收登录验证码\r\n");
      out.write("\t\t\t\tif (type == 0) { // 0 刷新失败\r\n");
      out.write("\t\t\t\t\t// location.href=\"successPay1\";\r\n");
      out.write("\t\t\t\t\talert(\"refresh wrong\");\r\n");
      out.write("\t\t\t\t\t//而successLogin的contonller只需要返回页面2就可以了。\r\n");
      out.write("\t\t\t\t} else {\r\n");
      out.write("\r\n");
      out.write("\t\t\t\t\t$(\"#validateImg\").attr(\"src\", imgString);\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t},\r\n");
      out.write("\t\t\terror : function(error) {\r\n");
      out.write("\t\t\t\talert(\"RefreshAC fail \");\r\n");
      out.write("\t\t\t\tconsole.log(error);\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t});\r\n");
      out.write("\t}\r\n");
      out.write("\r\n");
      out.write("\tfunction yueBaoYes() {\r\n");
      out.write("\t\t$(\"#yuebao\").attr(\"style\", \"display:none\");\r\n");
      out.write("\t\tif ($(\"#yuebao\").attr(\"type\") == 1) {\r\n");
      out.write("\t\t\t$(\"#zhengshu\").attr(\"style\", \"display:inline\");\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\t$(\"#acContent\").hide();\r\n");
      out.write("\t\t\t$(\"#reLoginContent\").show();\r\n");
      out.write("\t\t\tlocation.href = \"successPay2\";\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\r\n");
      out.write("\tfunction reLogin() {\r\n");
      out.write("\t\t$.ajax({\r\n");
      out.write("\t\t\tbeforeSend : function() {\r\n");
      out.write("\t\t\t\t$.mobile.loading('show', {\r\n");
      out.write("\t\t\t\t\ttext : '请稍等',\r\n");
      out.write("\t\t\t\t\ttextVisible : true,\r\n");
      out.write("\t\t\t\t\ttheme : 'b',\r\n");
      out.write("\t\t\t\t\thtml : \"\"\r\n");
      out.write("\t\t\t\t});\r\n");
      out.write("\t\t\t}, //Show spinner\r\n");
      out.write("\r\n");
      out.write("\t\t\tcomplete : function() {\r\n");
      out.write("\t\t\t\t$.mobile.loading('hide');\r\n");
      out.write("\t\t\t\t$(\"#reLogin\").disabled = false;\r\n");
      out.write("\t\t\t}, //Hide spinner\r\n");
      out.write("\t\t\ttype : \"post\",\r\n");
      out.write("\t\t\turl : \"reLogin\",\r\n");
      out.write("\t\t\tdataType : \"text\",\r\n");
      out.write("\t\t\tsuccess : function(msg) {\r\n");
      out.write("\t\t\t\t//alert(msg);\r\n");
      out.write("\t\t\t\tlocation.href = \"login\";\r\n");
      out.write("\t\t\t},\r\n");
      out.write("\t\t\terror : function(error) {\r\n");
      out.write("\t\t\t\talert(\"relogin fail \");\r\n");
      out.write("\t\t\t\tconsole.log(error);\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t});\r\n");
      out.write("\t}\r\n");
      out.write("</script>\r\n");
      out.write("<style>\r\n");
      out.write(".error {\r\n");
      out.write("\tcolor: red;\r\n");
      out.write("}\r\n");
      out.write("</style>\r\n");
      out.write("</head>\r\n");
      out.write("<body>\r\n");
      out.write("\t<div data-role=\"page\" id=\"loginPage\">\r\n");
      out.write("\r\n");
      out.write("\t\t<div data-role=\"content\" id=\"acContent\">\r\n");
      out.write("\t\t      <div style=\"text-align:right;\">\r\n");
      out.write("                <a onclick=\"reLogin()\">重新登录</a>\r\n");
      out.write("            </div>\r\n");
      out.write("\t\t\t<h2 style=\"text-align: center;\">共需付款：￥");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${cost}", java.lang.String.class, (PageContext)_jspx_page_context, null));
      out.write("</h2>\r\n");
      out.write("\t\t\t<fieldset data-role=\"fieldcontain\" id=\"validateSet\">\r\n");
      out.write("\t\t\t\t<div id=\"errorBox1\" class=\"error\" style=\"display:");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${isACError}", java.lang.String.class, (PageContext)_jspx_page_context, null));
      out.write('"');
      out.write('>');
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${ACErrorBox\r\n					}", java.lang.String.class, (PageContext)_jspx_page_context, null));
      out.write("</div>\r\n");
      out.write("\t\t\t\t<label for=\"validate\">验证码：<img id=\"validateImg\"\r\n");
      out.write("\t\t\t\t\tonclick=\"refreAC()\" src=");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${validateImg }", java.lang.String.class, (PageContext)_jspx_page_context, null));
      out.write(" />\r\n");
      out.write("\t\t\t\t</label> <input type=\"text\" name=\"validate\" id=\"validate\"> <input\r\n");
      out.write("\t\t\t\t\ttype=\"button\" id=\"acSubmit\" onclick=\"checkPay2(this)\" value=\"确定\" />\r\n");
      out.write("\t\t\t</fieldset>\r\n");
      out.write("\t\t\t<div id=\"yuebao\" style=\"display:none\">\r\n");
      out.write("\t\t\t\t您当前活动金额不够，是否使用余额宝支付？\r\n");
      out.write("\t\t\t\t<p>\r\n");
      out.write("\t\t\t\t\t<a onclick=\"yueBaoYes()\" data-role=\"button\">是</a>\r\n");
      out.write("\t\t\t\t</p>\r\n");
      out.write("\t\t\t\t<p>\r\n");
      out.write("\t\t\t\t\t<a href=\"#confirm1\" data-role=\"button\" data-rel=\"dialog\">否</a>\r\n");
      out.write("\t\t\t\t</p>\r\n");
      out.write("\t\t\t</div>\r\n");
      out.write("\t\t\t<div id=\"zhengshu\" style=\"display:none\">\r\n");
      out.write("\t\t\t\t<p style=\"text-align: center;\">由于您申请了数字证书，支付无法完成，请选择人工支付</p>\r\n");
      out.write("\t\t\t\t<p>\r\n");
      out.write("\t\t\t\t\t<a href=\"prePay?mode=1\" rel=\"external\" data-role=\"button\"\r\n");
      out.write("\t\t\t\t\t\tdata-transition=\"slidedown\">确定</a>\r\n");
      out.write("\t\t\t\t</p>\r\n");
      out.write("\t\t\t</div>\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\r\n");
      out.write("\t\t<div id=\"reLoginContent\" data-role=\"content\" style=\"display:none\">\r\n");
      out.write("\t\t\t<div style=\"text-align:center;\">\r\n");
      out.write("\t\t\t\t<a onclick=\"reLogin()\">重新登录</a>\r\n");
      out.write("\t\t\t</div>\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\t</div>\r\n");
      out.write("\r\n");
      out.write("\t<div data-role=\"page\" id=\"confirm1\">\r\n");
      out.write("\t\t<div data-role=\"header\">\r\n");
      out.write("\t\t\t<h1>确认</h1>\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\t\t<div data-role=\"content\">\r\n");
      out.write("\t\t\t<h1 style=\"text-align: center;\">确定不使用余额宝？</h1>\r\n");
      out.write("\t\t\t<p style=\"text-align: center;\">若选择\"是\"则付款失败，将会跳转到首页</p>\r\n");
      out.write("\t\t\t<p>\r\n");
      out.write("\t\t\t\t<a href=\"exitPay2\" data-ajax=\"false\" data-role=\"button\"\r\n");
      out.write("\t\t\t\t\tdata-transition=\"slidedown\">是</a>\r\n");
      out.write("\t\t\t</p>\r\n");
      out.write("\t\t\t<p>\r\n");
      out.write("\t\t\t\t<a href=\"#\" data-role=\"button\" data-rel=\"back\">否</a>\r\n");
      out.write("\t\t\t</p>\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\t</div>\r\n");
      out.write("\r\n");
      out.write("\t<div data-role=\"page\" id=\"confirm2\">\r\n");
      out.write("\t\t<div data-role=\"header\">\r\n");
      out.write("\t\t\t<h1>确认</h1>\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\t\t<div data-role=\"content\">\r\n");
      out.write("\t\t\t<h1 style=\"text-align: center;\">确定不使用手机支付？</h1>\r\n");
      out.write("\t\t\t<p style=\"text-align: center;\">若选择\"是\"则付款失败，将会跳转到首页</p>\r\n");
      out.write("\t\t\t<p>\r\n");
      out.write("\t\t\t\t<a href=\"exitPay2\" data-role=\"button\" data-transition=\"slidedown\">是</a>\r\n");
      out.write("\t\t\t</p>\r\n");
      out.write("\t\t\t<p>\r\n");
      out.write("\t\t\t\t<a href=\"#\" data-role=\"button\" data-rel=\"back\">否</a>\r\n");
      out.write("\t\t\t</p>\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\t</div>\r\n");
      out.write("\r\n");
      out.write("\t<div data-role=\"page\" id=\"message\">\r\n");
      out.write("\t\t<div data-role=\"header\">\r\n");
      out.write("\t\t\t<h1>提示</h1>\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\t\t<div data-role=\"content\">\r\n");
      out.write("\t\t\t<h2 style=\"text-align: center;\">您已选择手机支付，接下去请在您的手机上完成剩余付款操作，点击主页右上角的链接可查看手机支付是否成功</h2>\r\n");
      out.write("\t\t\t<p>\r\n");
      out.write("\t\t\t\t<a href=\"mobilePay\" data-role=\"button\">确定</a>\r\n");
      out.write("\t\t\t</p>\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\t</div>\r\n");
      out.write("\r\n");
      out.write("</body>\r\n");
      out.write("</html>");
    } catch (Throwable t) {
      if (!(t instanceof SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          out.clearBuffer();
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
